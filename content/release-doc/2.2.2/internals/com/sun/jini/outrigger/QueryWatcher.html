<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sun Nov 10 23:24:25 EST 2013 -->
<title>QueryWatcher (Apache River v2.2.2 API Documentation (internals))</title>
<meta name="date" content="2013-11-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="QueryWatcher (Apache River v2.2.2 API Documentation (internals))";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QueryWatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/sun/jini/outrigger/ProxyVerifier.html" title="class in com.sun.jini.outrigger"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/sun/jini/outrigger/ReadIfExistsWatcher.html" title="class in com.sun.jini.outrigger"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/sun/jini/outrigger/QueryWatcher.html" target="_top">Frames</a></li>
<li><a href="QueryWatcher.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.sun.jini.outrigger</div>
<h2 title="Class QueryWatcher" class="title">Class QueryWatcher</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html" title="class in com.sun.jini.outrigger">com.sun.jini.outrigger.TransitionWatcher</a></li>
<li>
<ul class="inheritance">
<li>com.sun.jini.outrigger.QueryWatcher</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../com/sun/jini/outrigger/SingletonQueryWatcher.html" title="class in com.sun.jini.outrigger">SingletonQueryWatcher</a>, <a href="../../../../com/sun/jini/outrigger/TakeMultipleWatcher.html" title="class in com.sun.jini.outrigger">TakeMultipleWatcher</a></dd>
</dl>
<hr>
<br>
<pre>abstract class <span class="strong">QueryWatcher</span>
extends <a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html" title="class in com.sun.jini.outrigger">TransitionWatcher</a></pre>
<div class="block">Subclass of <code>TransitionWatcher</code> for blocking queries.
 <code>QueryWatcher</code>s are waiting for a set of conditions (time,
 transitions, etc.) that will <em>resolve</em> the query.  Threads can
 block on resolution by calling the <code>waitOnResolution</code> method.
 Once <code>waitOnResolution</code> than can use subclass specific 
 methods to obtain the result.
 <p>
 Resolution may involve <em>capturing</em> one or more entries (that
 is locking or removing an entry from the space). It is important
 that a <code>QueryWatcher</code> never capture an entry after the
 watcher enters the resolved state, since that could allow a caller
 to believe that the call failed, when it fact it locked or removed
 an entry and/or in entries being removed/locked that are never
 returned to the client. Put another way, the decision to capture an
 entry has to be done atomically with the check that ensures that
 the related query is still unresolved.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#expiration">expiration</a></strong></code>
<div class="block">When this query ends</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.sun.jini.outrigger.TransitionWatcher">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.sun.jini.outrigger.<a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html" title="class in com.sun.jini.outrigger">TransitionWatcher</a></h3>
<code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#startOrdinal">startOrdinal</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#QueryWatcher(long, long, long)">QueryWatcher</a></strong>(long&nbsp;expiration,
            long&nbsp;timestamp,
            long&nbsp;startOrdinal)</code>
<div class="block">Create a new <code>QueryWatcher</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) abstract boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#catchUp(com.sun.jini.outrigger.EntryTransition, long)">catchUp</a></strong>(<a href="../../../../com/sun/jini/outrigger/EntryTransition.html" title="class in com.sun.jini.outrigger">EntryTransition</a>&nbsp;transition,
       long&nbsp;now)</code>
<div class="block">Process a transition which was posted before the watcher was
 placed in <code>TransitionWatchers</code> object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#getExpiration()">getExpiration</a></strong>()</code>
<div class="block">Get the expiration time of this object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) abstract boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#isResolved()">isResolved</a></strong>()</code>
<div class="block">Returns <code>true</code> if this query has been resolved.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#removeIfExpired(long)">removeIfExpired</a></strong>(long&nbsp;now)</code>
<div class="block">This method does nothing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sun/jini/outrigger/QueryWatcher.html#waitOnResolution()">waitOnResolution</a></strong>()</code>
<div class="block">Block until the query this object represents is resolved.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.sun.jini.outrigger.TransitionWatcher">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.sun.jini.outrigger.<a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html" title="class in com.sun.jini.outrigger">TransitionWatcher</a></h3>
<code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#addTemplateHandle(com.sun.jini.outrigger.TemplateHandle)">addTemplateHandle</a>, <a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#compareTo(java.lang.Object)">compareTo</a>, <a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#isInterested(com.sun.jini.outrigger.EntryTransition, long)">isInterested</a>, <a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#process(com.sun.jini.outrigger.EntryTransition, long)">process</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="expiration">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>expiration</h4>
<pre>private final&nbsp;long expiration</pre>
<div class="block">When this query ends</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="QueryWatcher(long, long, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>QueryWatcher</h4>
<pre>QueryWatcher(long&nbsp;expiration,
            long&nbsp;timestamp,
            long&nbsp;startOrdinal)</pre>
<div class="block">Create a new <code>QueryWatcher</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>expiration</code> - the initial expiration time
        for this <code>QueryWatcher</code> in 
        milliseconds since the beginning of the epoch.</dd><dd><code>timestamp</code> - the value that is used
        to sort <code>TransitionWatcher</code>s.</dd><dd><code>startOrdinal</code> - the highest ordinal associated
        with operations that are considered to have occurred 
        before the operation associated with this watcher.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getExpiration()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExpiration</h4>
<pre>public&nbsp;long&nbsp;getExpiration()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#getExpiration()">TransitionWatcher</a></code></strong></div>
<div class="block">Get the expiration time of this object.  This method may be
 called before <code>addTemplateHandle</code> is called.
 Assumes locking is handled by the caller.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#getExpiration()">getExpiration</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html" title="class in com.sun.jini.outrigger">TransitionWatcher</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The time (in milliseconds since the beginning of
         the epoch) when this watcher is no longer relevant.</dd></dl>
</li>
</ul>
<a name="catchUp(com.sun.jini.outrigger.EntryTransition, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>catchUp</h4>
<pre>abstract&nbsp;boolean&nbsp;catchUp(<a href="../../../../com/sun/jini/outrigger/EntryTransition.html" title="class in com.sun.jini.outrigger">EntryTransition</a>&nbsp;transition,
              long&nbsp;now)</pre>
<div class="block">Process a transition which was posted before the watcher was
 placed in <code>TransitionWatchers</code> object. Assumes that
 the entry in the transition matches matches the template in the
 <code>TemplateHandle</code> associated with this watcher. Does
 not assume <code>isInterested</code> has been called.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>transition</code> - A <code>EntryTransition</code> that
              describes the transition and what
              entry is transitioning. This method
              will assume that <code>transition.getHandle</code>
              returns a non-null value.</dd><dd><code>now</code> - An estimate of the current time (not the time
              when the event occured).</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the query has been resolved, and
         <code>false</code> otherwise. Note, even if this
         call returns <code>true</code>, <code>waitOnResolution</code>
         must still be called.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if <code>transition</code> is 
         <code>null</code>.</dd></dl>
</li>
</ul>
<a name="removeIfExpired(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeIfExpired</h4>
<pre>void&nbsp;removeIfExpired(long&nbsp;now)</pre>
<div class="block">This method does nothing. Since each <code>QueryWatcher</code>
 has a thread that blocks until the expiration time is reached
 it simpler to do the removal there instead of in the
 reaping thread.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html#removeIfExpired(long)">removeIfExpired</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/sun/jini/outrigger/TransitionWatcher.html" title="class in com.sun.jini.outrigger">TransitionWatcher</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>now</code> - An estimate of the current time that must be
            less than or equal to the current time.</dd></dl>
</li>
</ul>
<a name="waitOnResolution()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitOnResolution</h4>
<pre>abstract&nbsp;void&nbsp;waitOnResolution()
                        throws <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Block until the query this object represents is resolved.  If the
 query is already resolved, return immediately. This method must be
 called even if it is know that the query has been resolved.
 This method should be called exactly once.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="isResolved()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isResolved</h4>
<pre>abstract&nbsp;boolean&nbsp;isResolved()</pre>
<div class="block">Returns <code>true</code> if this query has been resolved.  If the
 calling thread is owns the lock on this object the answer is
 definitive. If the lock is not held only a <code>true</code> answer
 can be considered definitive.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the query has been
 resolved, <code>false</code> otherwise.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QueryWatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/sun/jini/outrigger/ProxyVerifier.html" title="class in com.sun.jini.outrigger"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/sun/jini/outrigger/ReadIfExistsWatcher.html" title="class in com.sun.jini.outrigger"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/sun/jini/outrigger/QueryWatcher.html" target="_top">Frames</a></li>
<li><a href="QueryWatcher.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright 2007-2013, multiple authors.<br>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="child" >Apache License, Version 2.0</a>, see the <a href="../../../../doc-files/NOTICE" target="child" >NOTICE</a> file for attributions.</small></p>
</body>
</html>
